<% layout('layouts/boilerplate')%>
    <div class="container-fluid">
        <div class="row">
            <%- include('../partials/sidebar', {variant: 'users'}) %>
            <div role="main" class="col-md-9 ms-md-auto col-lg-10 px-4">
                <h1 class="h1 text-center my-4">Utilisateurs</h1>
                <hr>
                <div class="table-responsive">
                    <table class="table table-striped table-hover text-center">
                        <thead class="table-light">
                                <th scope="col">Nom d'utilisateur</th>
                                <th scope="col">Email</th>
                                <th scope="col">Nombre de commentaires</th>
                                <th scope="col">Nombre de commentaires modérés</th>
                                <th></th>
                                <th></th>
                        </thead>
                        <tbody>
                            <% for (const user of users){ %>
                            <tr>
                                <th scope="row"><%=user.username%></th>
                                <td><%=user.email%></td>
                                <td><%=user.count%></td>
                                <td><%=user.moderatedCount%></td>
                                <td ><a href="/admin/reviews?author=<%=user._id%>" target="_blank" class="btn btn-info btn-sm">Voir les avis</a></td>                                <td>
                                <td>  
                                    <form action="/users/<%=user._id%>?_method=DELETE" method="post">
                                        <button class="btn btn-danger btn-sm">Bannir</button>
                                    </form>
                                </td>
                            </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

<script src="/libs/js/bootstrap.bundle.min.js"></script>